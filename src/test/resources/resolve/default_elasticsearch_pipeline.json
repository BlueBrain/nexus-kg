{
  "@id": "random",
  "@type": "Pipeline",
  "configurations": [
    {
      "@type": "ElasticSearchIndex",
      "mapping": {},
      "@id": "http://elastic.id"
    }
  ],
  "actions": {
    "start": [
      {
        "@type": "CreateIndex",
        "reference": "http://elastic.id"
      }
    ],
    "reStart": [
      {
        "@type": "DeleteIndex",
        "reference": "http://elastic.id"
      }
    ]
  },
  "stages": [
    {
      "@type": "ProjectEvents"
    },
    {
      "@type": "ToResource",
      "tag": "{tag}"
    },
    {
      "@type": "Match",
      "stages": [
        {
          "when": {
            "@type": "ResourceFilter",
            "deprecated": false,
            "types": [],
            "schemas": []
          },
          "stages": [
            {
              "@type": "DeleteFromElasticSearch",
              "reference": "http://elastic.id",
              "keep": "left"
            },
            {
              "@type": "AddResourceMetadata"
            },
            {
              "@type": "AddSourceTriple"
            },
            {
              "@type": "InsertIntoElasticSearch",
              "reference": "http://elastic.id"
            }
          ]
        },
        {
          "when": {
            "@type": "ResourceFilter",
            "deprecated": true
          },
          "stages": [
            {
              "@type": "DeleteFromElasticSearch",
              "reference": "http://elastic.id"
            }
          ]
        }
      ]
    }
  ]
}